\section{The archive} 

At the time of writing, the full ULTRACAM archive is still undergoing analysis by the automated pipeline. At present \emph{347} nights, out of a total of \emph{406}, have been processed and are available for viewing on a web server hosted at the University of Warwick. Of these processed nights, approximately \emph{xx} have been investigated for variability. At the moment, the investigation is performed by a visual check on the light-curve. The web interface is designed so that it is easy for the viewer to examine the light-curves of all of the objects systematically. The user-interface allows the users to see each light curve in turn by pressing the 'right' and 'left'  arrow keys on the keyboard. More information on how to use this interface can be found in the User Manual at appendix ~\ref{chap:usermanual}. 

\section{Data quality}

\subsection{Photometric calibration}
The main purpose of this MSc project was to establish a process for automatically reducing the light-curves for all objects in the data archive rather than to focus on accurate and well-calibrated measurements. The diverse nature of the dataset means that it is not trivial to write a purely automated algorithm that can perform fully calibrated measurements. 

Correct calibration of the photometry for ULTRACAM requires to the following steps:
\begin{itemize}
  \item Using \emph{flat fields} to take into account the varying sensitivity of the individual pixels of the CCD detector. 
  \item Subtracting \emph{bias} frames from each image to remove the additional counts caused by having a non-zero bias on the CCD. 
  \item Using a \emph{standard star} to calculate the offset magnitude required to calibrate to the standard magnitude system. For ULTRACAM these are usually Sloan u, g, r, i magnitudes.
  \item Computing the \emph{atmospheric extinction} for the night by fitting extinction curves for a number of bright objects that have been measured over a range of airmass. 
\end{itemize}
During a typical night at the telescope, the observers will take steps to ensure that there are sufficient data to perform this calibration. They will take several bias frames, flat-fields and will observe standard stars. When the reduction is performed later, these various datasets will be combined to calibrate the photometry of the target objects. 

The automated pipeline built for this project lacks the ability to correctly identify the appropriate bias readings, flat-fields and standard stars that should be used for photometric calibration. This requires human intervention. Therefore, this step is skipped altogether. The magnitudes and flux counts produced by the automated pipeline are \emph{not} calibrated and will differ from their true values by a certain offset.

It is possible to take the output of the automated pipeline and calibrate the photometry, but, at the moment, this is a manual process. 

\subsection{Comparison of the 2 pipelines}
Since the ULTRACAM already has a well-established data reduction pipeline, it is useful to compare the results of this pipeline with the new, automated one built in this project. As mentioned above, the automated pipeline does not perform calibrated photometry, but we can still compare the non-calibrated photometry to get an estimate of how well our new pipeline performs.

In order to do this, we chose a run of a target object that has often been observed with the ULTRACAM. The object is NN Ser, a white-dwarf, M-dwarf eclipsing binary. The specific run in question is \emph{2013-07-13/run111}.

Producing the photometry using the automated pipeline on this run is achieved by simply typing: \texttt{runbuilder.py 2013-07-13/run111} on the command line. Please refer to the user manual in appendix \ref{chap:usermanual} for instructions on how to install and run the pipeline.  The reduction takes about 5 minutes processing time running on a standard desktop machine in the University of Warwick Astronomy department. The output of this reduction can be seen at \url{http://deneb.astro.warwick.ac.uk/phrnaw/sitedev/2013-07-13/run111.html}.

\begin{figure}
\centering
\includegraphics[width=120mm]{images/2013-07-13-run111-r-withlabels.png}
\caption{Snapshot taken from the automated pipeline browser for 2013-07-13/run111. The target, {NN Ser} is labeled object `7' and the object we have used as the comparison is labeled '0' in the image. This is a stacked image from the 'red' CCD with the Sloan 'i' filter. }
\label{fig:nnserfield}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=140mm]{images/nnser_lightcurve_automated.eps}
\caption{Light curve of the target object, NN Ser produced using the \emph{automated pipeline}. The intensity of the target is plotted as its flux relative to the comparison star in the field. The red, green and blue data points are the measurements taken in the Sloan i, g, and u filters, respectively.}
\label{fig:nnserlightcurveautomated}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=140mm]{images/nnser_lightcurve_tom.eps}
\caption{Light curve of the target object, NN Ser, produced using the \emph{standard pipeline}. The intensity of the target is plotted as its flux relative to the comparison star in the field. The red, green and blue data points are the measurements taken in the Sloan i, g, and u filters, respectively. Note that the automated pipeline (previous figure) completely loses the target in the $u$ and $g$ filters during the primary eclipse. This is in contrast to this traditional pipeline. This is due to the fact that the automated pipeline creates new apertures for each frame in the run and the target is too faint during the eclipse to trigger the aperture creation.}
\label{fig:nnserlightcurvetom}
\end{figure}

The light-curves in figures \ref{fig:nnserlightcurveautomated} and \ref{fig:nnserlightcurvetom} are a good demonstration of the reduction of an interesting eclipse, but, in order to perform a comparison of the two pipelines, it makes more sense to choose two objects in this run that we can assume are \emph{constant} objects. The object we have chosen as the comparison star is the brightest one in the field and is labeled `0' in figure \ref{fig:nnserfield}. The figure \ref{fig:comparephotometry} shows a plot of the relative flux counts for object `0' and is produced by taking the flux reading from the \emph{automated} pipeline and dividing it by the flux reading from the \emph{traditional} pipeline. 

\begin{figure}[!h]
\centering
\includegraphics[width=140mm]{images/compare_photometry.eps}
\caption{A comparison of the flux measurements for a single object (object `0' in figure \ref{fig:nnserfield}). The plot is produced by dividing the flux counts as measured by the \emph{automated} pipeline by the flux counts as measured by the \emph{traditional} pipeline.}
\label{fig:comparephotometry}
\end{figure}

\begin{table}
  \label{tab:differential}
  \centering
  \begin{tabular}{|l|r|r|}
    \hline
    Filter & Relative flux  \\
           &  $mean[std. dev]$ \\
    \hline
    'i'    & 0.991[0.003] \\
    'g'    & 0.994[0.003] \\
    'u'    & 0.988[0.007] \\
    \hline
   \end{tabular}
  \caption{Table showing the statistics of the relative photometry produced by dividing the flux counts from the \emph{automated} pipeline by the flux counts from the \emph{traditional} pipeline for object '0'.}
\end{table}

\subsection{Apertures}
Since the automated pipeline relies on the third party software, SExtractor, to determine the apertures on each frame, objects that do not meet the required signal to noise ratio on any particular frame will not be detected and therefore have no aperture defined for that frame. This means that objects that fade or are generally quite faint, might 'disappear' on some frames and then 're-appear' on subsequent frames. The tracking algorithm allows a 're-appearing' object to be identified with an object that had previously disappeared on previous frames provided that the pixel location is roughly similar. An illustration of this can be seen in figures \ref{fig:nnserlightcurveautomated} and \ref{fig:nnserlightcurvetom} where the automated pipeline 'loses' the target object in the 'g' and 'u' bands after the ingress of the primary eclipse, but picks it up again at the start of egress. In contrast, the traditional reduction pipeline can have apertures that are linked to other objects in the field and can therefore continue to measure flux in the aperture for the target even if the target is barely detectable above the sky background.

\section{Colour-Colour plots}
Although the automated pipeline does not perform a calibration of the magnitudes of the objects, by using standard stars and extinction corrections, it is still possible to create colour-colour diagrams provided that we are not concerned with the correct offsets for our $(u-g)$ and $(g-r)$ axes. For a few selected runs, where we have > 100 objects clearly identified for the run, we can produce non-calibrated colour-colour diagrams. In these automatically produced plots, there are some 'outliers' showing colours that are too extreme to be genuine astronomical bodies. These outliers are due to objects being mis-identified across the three colour channels as can happen in crowded fields. In other words, an object might have been identified as the 'same' object in the blue channel (due to its proximity on the image) but is actually only near neighbour to another object in the red and green channels. The pipeline has mistakenly placed all three measurements as belonging to the same object. 

\begin{figure}
\centering
\includegraphics[width=120mm]{images/2013-07-21-run010-2colour.eps}
\caption{The colour-colour plot of run: \emph{2013-07-21/run010}. The plot contains 110 objects located near the Kepler exoplanet host KIC5115978, which is slightly out of the galactic plane. The offsets on the x and y axes are both arbitrary as the photometry has not been calibrated with photometric standards. The outliers with extreme red and blue colours are due to mistaken classification by the automated pipeline. }
\label{fig:differentialtrad}
\end{figure}

\begin{figure}
\centering
\includegraphics[width=120mm]{images/2013-07-21-run011-2colour.eps}
\caption{The colour-colour plot of run: \emph{2013-07-21/run011}. The offsets on the x and y axes are both arbitrary as the photometry has not been calibrated with photometric standards. The outliers with extreme red and blue colours are due to mistaken classification by the automated pipeline. }
\label{fig:differentialtrad}
\end{figure}


\begin{figure}
\centering
\includegraphics[width=120mm]{images//2011-04-22-run019-omegacen-2colour.eps}
\caption{The colour-colour plot of run: \emph{2011-04-22/run019}. The field contains 1088 objects identified in edge of the globular cluster \emph{Omega Centaurus}. The offsets on the x and y axes are both arbitrary as the photometry has not been calibrated to photometric standards. The extreme blue outliers are errors caused by the pipeline mis-identifying objects across the three channels.}
\label{fig:differentialtrad}
\end{figure}

It should be added that it is possible to produce calibrated colour-colour diagrams from the automated pipeline, if we manually perform the calibration and correct our figures. 
